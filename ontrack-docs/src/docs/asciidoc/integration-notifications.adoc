[[notifications]]
=== Notifications

Ontrack has the possibility to send send notifications to different <<notifications-backends,backends>> like some webhooks, email, Slack messages, etc.

A notification is the association between an _event_ occurring on an _entity_ and sent to a given _backend_ using some _configuration_.

For example, a notification can be:

* event: a build has been <<model,promoted>>
* entity: the branch the build <<model,belongs to>>
* backend: email
* backend configuration: the subject & the email addresses

In this example, the body of the email would be a text like "Build B of branch R in project P has been promoted to P", which various links to Ontrack.

Administrators of Ontrack can create and configure the different <<notifications-backends,backends>>. They can also configure the notifications at entity level to respond to some events using notification configurations (<<notifications-subscriptions,_subscriptions_>>). Subscriptions can be either <<notifications-subscriptions-local,local>> (subscribing to the events on a given branch) or <<notifications-subscriptions-global,global>> (subscribing to the events in all Ontrack, regardless of the entity).

[[notifications-backends]]
==== Notification backends

Ontrack can send notifications to:

* <<webhooks,webhooks>>
* <<slack,Slack>>
* email

[[notifications-subscriptions]]
==== Subscriptions

Subscriptions can be done at <<model,entity level>> (project, branch, promotion, etc.) or globally.

[[notifications-subscriptions-local]]
===== Local subscriptions

On an entity page (like the page for a project, a branch, etc.), go to the _Tools_ menu and select _ Subscriptions_:

image::integration-notifications-subscriptions-menu.png[Subscriptions menu]

On the subsequent, you can manage the list of subscriptions at this entity level.

image::integration-notifications-subscriptions-list.png["List of subscriptions"]

To create a subscription, select the _New subscription_ command and enter the fields for the subscription:

image::integration-notifications-new-subscription.png["New subscription dialog",500]

* events - list of events to listen to
* keywords - space-separated list of words which will be used to restrict the events being listened to
* channel - destination for the notification. Depending on the channel being selected, additional fields are needed (for example, for a Slack notification, the Slack channel is required)

On the subscription list, you can:

* enable/disable each subscription
* delete a subscription

[[notifications-subscriptions-global]]
===== Global subscriptions

[[notifications-recordings]]
==== Recordings

For audit and troubleshooting purposes, all notifications are recorded and administrators can have access to them using the _Notification recordings_ user menu:

image::integration-notifications-recordings.png[Notifications recordings]

Each recording has the following columns:

* timestamp (UTC) - when was the notification actually sent
* channel - which channel was used by the notification
* result - outcome of the notification
** OK - notification was sent successfully
** NOT_CONFIGURED - the notification channel not configured
** INVALID_CONFIGURATION - the notification channel is wrongly configured
** DISABLED - the notification channel has been disabled
** ERROR - there was an error

By clicking on the eye icon left of the timestamp, you can see more details about the notification:

image::integration-notifications-recording-details.png[Notification recording details]

* Channel config - the JSON representation of the configuration of the notification channel
* Event - the JSON representation of the event being sent

Finally, the administrator can filter recordings on their results and the _Delete ALL records_ can be used to clear out all recordings.
